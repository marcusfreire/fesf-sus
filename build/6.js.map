{"version":3,"sources":["../../src/pages/registrar-usuario/registrar-usuario.module.ts","../../src/pages/registrar-usuario/registrar-usuario.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { RegistrarUsuarioPage } from './registrar-usuario';\n\n@NgModule({\n  declarations: [\n    RegistrarUsuarioPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(RegistrarUsuarioPage),\n  ],\n})\nexport class RegistrarUsuarioPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/registrar-usuario/registrar-usuario.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { User } from '../../models/user';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { ToastService } from '../../service/toast/toast.service';\nimport { Observable } from 'rxjs/Observable';\nimport { Cidade } from '../../models/cidade';\nimport { CidadeListService } from '../../service/cidade-list/cidade-list.service';\nimport { AngularFireDatabase } from 'angularfire2/database';\n\n/**\n * Generated class for the RegistrarUsuarioPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-registrar-usuario',\n  templateUrl: 'registrar-usuario.html',\n})\nexport class RegistrarUsuarioPage {\n\n  userLogado = {} as User;\n  user: User = {\n    nome:'',\n    cidade:'',\n    email:'',\n    coordenador: false,\n  };\n  cidadeCoord:string;\n  err_texto:string = '';\n  senha:string = '';\n  cidadeLista$: Observable<Cidade[]>;\n\n  constructor(private afAuth: AngularFireAuth, public navCtrl: NavController,\n     public navParams: NavParams, private toast: ToastService, public listacidade: CidadeListService,\n    private afDatebase: AngularFireDatabase) {\n      this.cidadeLista$ = this.listacidade\n      .getCidadeList()\n      .snapshotChanges()\n      .map (Changes => {\n          return Changes.map(p => ({\n          chave: p.payload.key, ...p.payload.val()}));\n      })\n  }\n\n  ionViewWillLoad() {\n    this.userLogado = this.navParams.get('User');\n    this.user.cidade = this.userLogado.cidade; \n    console.log(`Cidade do coordenador: ${this.userLogado.cidade}`);\n  }\n\n  async registrar(user: User){\n    try{\n      const result = await this.afAuth.auth.createUserWithEmailAndPassword(user.email,this.senha).then(ref => {\n        console.log(`Chave ${ref.uid}`);\n        this.afDatebase.object(`perfil/${ref.uid}`).set(this.user);\n        this.toast.show(`Adicionado ${user.email} com Sucesso!`);\n        this.navCtrl.setRoot('AdmHomePage',{key: ref.key,User: this.userLogado})\n      });\n      console.log(result);\n    }\n    catch(e){\n      //Erro não utilizado, quando está tudo vazio\n      // auth/argument-error\n      if (e.code === 'auth/weak-password') {\n          this.err_texto = \"Senha: Conter no mínimo 6 caracteres\";\n          console.log(\"A senha deve conter no mínimo 6 caracteres\");\n      }\n      else if(e.code === 'auth/invalid-email'){\n        this.err_texto = \"O email informado é invalido\";\n        console.log(\"O email informado é invalido\");\n      }\n      else if(e.code === 'auth/argument-error'){\n        this.err_texto = \"E-mail ou Senha não digitada\";\n        console.log(\"E-mail ou Senha não digitada\");\n      }\n      else if(e.code === 'auth/email-already-in-use'){\n        this.err_texto = \"E-mail já está cadastrado\";\n        console.log(\"E-mail já está cadastrado\");\n      }\n      else {\n          this.err_texto = \"Erro, por favor repita a operação\";\n          console.log(\"Erro\");\n      }\n        console.error(e.code);\n    }      \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/registrar-usuario/registrar-usuario.ts"],"sourceRoot":""}